<!doctype html>
<html lang="en"><head><meta charset="utf-8"><meta name="generator" content="Hexo 4.2.0"><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"><meta><title>Clear Architecture - Programming Paradigms &amp; Design Principles</title><meta description="Clean Architecture is one of the series book that written by “Uncle Bob”. In last post, I writed a summary of the Clean Code. It is super useful for begineers. But as we going deeper, we need take a s"><meta property="og:type" content="blog"><meta property="og:title" content="Clear Architecture - Programming Paradigms &amp; Design Principles"><meta property="og:url" content="http://yoursite.com/2020/05/11/ClearArchitecture1/"><meta property="og:site_name" content=""><meta property="og:description" content="Clean Architecture is one of the series book that written by “Uncle Bob”. In last post, I writed a summary of the Clean Code. It is super useful for begineers. But as we going deeper, we need take a s"><meta property="og:locale" content="en_US"><meta property="og:image" content="http://yoursite.com/thumbnails/CleanArchitecture.jpg"><meta property="article:published_time" content="2020-05-10T20:00:00.000Z"><meta property="article:modified_time" content="2020-10-28T05:09:02.891Z"><meta property="article:tag" content="English"><meta property="article:tag" content="Clean Architecture"><meta property="twitter:card" content="summary"><meta property="twitter:image" content="/thumbnails/CleanArchitecture.jpg"><script type="application/ld+json">{"@context":"https://schema.org","@type":"BlogPosting","mainEntityOfPage":{"@type":"WebPage","@id":"http://yoursite.com/2020/05/11/ClearArchitecture1/"},"headline":"","image":["http://yoursite.com/thumbnails/CleanArchitecture.jpg"],"datePublished":"2020-05-10T20:00:00.000Z","dateModified":"2020-10-28T05:09:02.891Z","author":{"@type":"Person","name":""},"description":"Clean Architecture is one of the series book that written by “Uncle Bob”. In last post, I writed a summary of the Clean Code. It is super useful for begineers. But as we going deeper, we need take a s"}</script><link rel="canonical" href="http://yoursite.com/2020/05/11/ClearArchitecture1/"><link rel="icon" href="/img/icon.png"><link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.12.0/css/all.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/highlight.js@9.12.0/styles/atom-one-light.css"><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Ubuntu:wght@400;600&amp;family=Source+Code+Pro"><link rel="stylesheet" href="/css/default.css"><style>body>.footer,body>.navbar,body>.section{opacity:0}</style><!--!--><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/lightgallery@1.6.8/dist/css/lightgallery.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/justifiedGallery@3.7.0/dist/css/justifiedGallery.min.css"><script src="https://www.googletagmanager.com/gtag/js?id=G-CCB21QTXP0" async></script><script>window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());
    
        gtag('config', 'G-CCB21QTXP0');</script><!--!--><script src="https://cdn.jsdelivr.net/npm/pace-js@1.0.2/pace.min.js"></script></head><body class="is-2-column"><nav class="navbar navbar-main"><div class="container"><div class="navbar-brand justify-content-center"><a class="navbar-item navbar-logo" href="/"><img src="/img/logo.png" alt="" height="28"></a></div><div class="navbar-menu"><div class="navbar-start"><a class="navbar-item" href="/">Home</a><a class="navbar-item" href="/categories/%E6%8A%80%E6%9C%AF%E5%8D%9A%E5%AE%A2">技术博客</a><a class="navbar-item" href="/categories/%E6%91%84%E5%BD%B1">摄影</a><a class="navbar-item" href="/archives">Timeline</a><a class="navbar-item" href="/tags">Tags</a></div><div class="navbar-end"><a class="navbar-item" target="_blank" rel="noopener" title="Download on GitHub" href="https://github.com/Yunze-Li"><i class="fab fa-github"></i></a><a class="navbar-item is-hidden-tablet catalogue" title="Catalogue" href="javascript:;"><i class="fas fa-list-ul"></i></a><a class="navbar-item search" title="Search" href="javascript:;"><i class="fas fa-search"></i></a></div></div></div></nav><section class="section"><div class="container"><div class="columns"><div class="column order-2 column-main is-8-tablet is-8-desktop is-8-widescreen"><div class="card"><div class="card-image"><span class="image is-7by3"><img class="thumbnail" src="/thumbnails/CleanArchitecture.jpg" alt="Clear Architecture - Programming Paradigms &amp; Design Principles"></span></div><article class="card-content article" role="article"><div class="article-meta size-small is-uppercase level is-mobile"><div class="level-left"><time class="level-item" dateTime="2020-05-10T20:00:00.000Z" title="2020-05-10T20:00:00.000Z">2020-05-11</time><span class="level-item"><a class="link-muted" href="/categories/%E6%8A%80%E6%9C%AF%E5%8D%9A%E5%AE%A2/">技术博客</a><span> / </span><a class="link-muted" href="/categories/%E6%8A%80%E6%9C%AF%E5%8D%9A%E5%AE%A2/Reading/">Reading</a></span><span class="level-item">10 minutes read (About 1503 words)</span></div></div><h1 class="title is-3 is-size-4-mobile">Clear Architecture - Programming Paradigms &amp; Design Principles</h1><div class="content"><p><em>Clean Architecture</em> is one of the series book that written by “Uncle Bob”. In last post, I writed a summary of the <em>Clean Code</em>. It is super useful for begineers. But as we going deeper, we need take a step back and see the “big picture” – software architecture, which is all this book talk about.</p>
<a id="more"></a>

<h2 id="Part-II-Starting-with-the-Bricks-Programming-Paradigms"><a href="#Part-II-Starting-with-the-Bricks-Programming-Paradigms" class="headerlink" title="Part II Starting with the Bricks: Programming Paradigms"></a>Part II Starting with the Bricks: Programming Paradigms</h2><h3 id="Structured-Programming-direct-transfer-of-control"><a href="#Structured-Programming-direct-transfer-of-control" class="headerlink" title="Structured Programming: direct transfer of control"></a>Structured Programming: direct transfer of control</h3><p>Constructed from <strong>sequence</strong>, <strong>selection</strong> and <strong>iteration</strong> to replace old <strong><em>goto</em></strong> keyword.</p>
<p>A typical structured programming example:</p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// sequence execution</span></span><br><span class="line"><span class="keyword">val</span> sum = <span class="number">0</span></span><br><span class="line"><span class="keyword">val</span> current = <span class="number">1</span></span><br><span class="line"><span class="comment">// iteration</span></span><br><span class="line"><span class="keyword">while</span> (current &lt; <span class="number">10</span>) &#123;</span><br><span class="line">  sum += current</span><br><span class="line">  current += <span class="number">1</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// selection</span></span><br><span class="line"><span class="keyword">if</span> (needNegative) &#123;</span><br><span class="line">  <span class="keyword">return</span> sum *= -<span class="number">1</span></span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">  <span class="keyword">return</span> sum</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span> sum</span><br></pre></td></tr></table></figure>

<blockquote>
<p>All programs can be constructed from just these three structures: sequence, selection and iteration.</p>
</blockquote>
<h3 id="Object-Oriented-Programming-indirect-transfer-of-control"><a href="#Object-Oriented-Programming-indirect-transfer-of-control" class="headerlink" title="Object-Oriented Programming: indirect transfer of control"></a>Object-Oriented Programming: indirect transfer of control</h3><p>Through the use of polymorphism to <strong><em>gain absolute control</em></strong> over every source code dependency in the system.<br>To better understnad about power of polymorphism. also check <strong>Dependency Inversion Principle</strong> below.</p>
<p>A typical object-oriented programming example:</p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// define Vehicle interface</span></span><br><span class="line"><span class="class"><span class="keyword">interface</span> <span class="title">Vehicle</span> </span>&#123;</span><br><span class="line">  <span class="function"><span class="keyword">fun</span> <span class="title">alarm</span><span class="params">()</span></span></span><br><span class="line">  <span class="function"><span class="keyword">fun</span> <span class="title">turnOn</span><span class="params">()</span></span></span><br><span class="line">  <span class="function"><span class="keyword">fun</span> <span class="title">turnOff</span><span class="params">()</span></span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// different brand of car, should all implement the same interface</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">BMW</span>: <span class="type">Vehicle &#123;</span></span></span><br><span class="line">  <span class="keyword">override</span> <span class="function"><span class="keyword">fun</span> <span class="title">alarm</span><span class="params">()</span></span> &#123;</span><br><span class="line">    makrSound(<span class="string">"di~di~"</span>)</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">override</span> <span class="function"><span class="keyword">fun</span> <span class="title">turnOn</span><span class="params">()</span></span> &#123;</span><br><span class="line">    ...</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">override</span> <span class="function"><span class="keyword">fun</span> <span class="title">turnOff</span><span class="params">()</span></span> &#123;</span><br><span class="line">    ...</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// but they can have diffrent implementation (such as differnt alram sound)</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Ford</span>: <span class="type">Vehicle &#123;</span></span></span><br><span class="line">  <span class="keyword">override</span> <span class="function"><span class="keyword">fun</span> <span class="title">alarm</span><span class="params">()</span></span> &#123;</span><br><span class="line">    makrSound(<span class="string">"do~do~"</span>)</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">override</span> <span class="function"><span class="keyword">fun</span> <span class="title">turnOn</span><span class="params">()</span></span> &#123;</span><br><span class="line">    ...</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">override</span> <span class="function"><span class="keyword">fun</span> <span class="title">turnOff</span><span class="params">()</span></span> &#123;</span><br><span class="line">    ...</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// when client code is using them, they don't need to know the implementation details</span></span><br><span class="line">Ford().turnOn()</span><br><span class="line">BMW().ring()</span><br></pre></td></tr></table></figure>

<blockquote>
<p>Any source code dependency, no matter where it is, can be inverted.</p>
</blockquote>
<h3 id="Functional-Programming-variable-assignment"><a href="#Functional-Programming-variable-assignment" class="headerlink" title="Functional Programming: variable assignment"></a>Functional Programming: variable assignment</h3><p>Variables in functional languages <strong>do not vary</strong>, which will causing <strong><em>none of</em></strong> race condition, deadlock or concurrent update problems.</p>
<p>A typical functional programming example:</p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Person</span> <span class="keyword">constructor</span> </span>(</span><br><span class="line">  <span class="keyword">private</span> <span class="keyword">val</span> name: String</span><br><span class="line">) &#123;</span><br><span class="line">  <span class="function"><span class="keyword">fun</span> <span class="title">getName</span><span class="params">()</span></span>: String &#123;</span><br><span class="line">    <span class="keyword">return</span> name</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// define a function to get person's name</span></span><br><span class="line"><span class="keyword">val</span> personName = <span class="function"><span class="title">fun</span><span class="params">(person: <span class="type">Person</span>)</span></span> = person.getName</span><br></pre></td></tr></table></figure>

<blockquote>
<p>Concurrent problems can be eliminated by segregate the application into mutable and immutable components.</p>
</blockquote>
<h2 id="Part-III-Design-Principles"><a href="#Part-III-Design-Principles" class="headerlink" title="Part III Design Principles"></a>Part III Design Principles</h2><h3 id="Single-Responsibility-Principle-SRP"><a href="#Single-Responsibility-Principle-SRP" class="headerlink" title="Single Responsibility Principle (SRP)"></a>Single Responsibility Principle (SRP)</h3><blockquote>
<p>A module should have one, and only one reason to change</p>
</blockquote>
<p>A common way to impose this principle is: Separate shared functional code blocks from specific logic. For example, here is a Employee class from payroll application:</p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Employee</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">val</span> employeeDB = EmployeeDatabase()</span><br><span class="line">    <span class="function"><span class="keyword">fun</span> <span class="title">getWorkingHours</span><span class="params">()</span></span>: <span class="built_in">Int</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> employeeDB.queryWorkingHours()</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">fun</span> <span class="title">calculatePayroll</span><span class="params">()</span></span>: <span class="built_in">Int</span> &#123;</span><br><span class="line">        <span class="keyword">val</span> workingHours = getWorkingHours()</span><br><span class="line">        <span class="keyword">val</span> salaryRatePerHour = employeeDB.querySalaryRatePerHour()</span><br><span class="line">        <span class="keyword">return</span> workingHours * salaryRatePerHour</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">fun</span> <span class="title">saveEmployee</span><span class="params">()</span></span> &#123;</span><br><span class="line">        employeeDB.updateEmpployee(<span class="keyword">this</span>)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>It’s clear that this Employee class has too many responsibilities including query working hour, query salary rate, calculate payroll, update employee info etc. And typical problem can be:</p>
<ol>
<li>It’s hard to extends, when introduce different ways to calculate payroll for example;</li>
<li>Who wants to change <strong>ONLY</strong> working hours fetching may also touch payroll calculation accidentally;</li>
<li><em>EmployeeDatabase</em> is exposed to Employee class, which is dangerous for open visibility.</li>
</ol>
<p>To solve these issues, we can do:</p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Employee</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">val</span> hourReporter = HourReporter()</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">val</span> payCalculator = PayCalculator()</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">val</span> employeeSaver = EmployeeSaver()</span><br><span class="line">    <span class="function"><span class="keyword">fun</span> <span class="title">getWorkingHours</span><span class="params">()</span></span>: <span class="built_in">Int</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> hourReporter.reportHours()</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">fun</span> <span class="title">calculatePayroll</span><span class="params">()</span></span>: <span class="built_in">Int</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> payCalculator.calculatePay()</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">fun</span> <span class="title">saveEmployee</span><span class="params">()</span></span> &#123;</span><br><span class="line">        employeeSaver.saveEmpployee(<span class="keyword">this</span>)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>As we can see, after we create <strong><em>HourReporter</em></strong>, <strong><em>PayCalculator</em></strong> and <strong><em>EmployeeSaver</em></strong>, we separate different responsibilities to different class so:</p>
<ol>
<li>if we want to have diffrent ways to calculate payroll, it can be updated inside <strong><em>PayCalculator</em></strong> and no need to update Employee class;</li>
<li>when working hours fetching need to change, no need to touch payroll calculation logic;</li>
<li>no more database expose to Employee class since it’s handled by these three classes <strong>internally</strong>.</li>
</ol>
<h3 id="Open-Closed-Principle-OCP"><a href="#Open-Closed-Principle-OCP" class="headerlink" title="Open-Closed Principle (OCP)"></a>Open-Closed Principle (OCP)</h3><blockquote>
<p>A software artifact should be open for extension but closed for modification.</p>
</blockquote>
<p>This is a common case that sometimes we want to extends part of our code and extends without having to modify that artifact. To make this possible, we need to implement component hierarchy structure so <strong>code change in lower level component will not effect higher level component</strong>. In other word, higher level component is being <strong><em>protected</em></strong> from code change chain.</p>
<p>Let’s continue on the Employee example:</p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Employee</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">val</span> hourReporter = HourReporter()</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">val</span> payCalculator = PayCalculator()</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">val</span> employeeSaver = EmployeeSaver()</span><br><span class="line">    <span class="function"><span class="keyword">fun</span> <span class="title">getWorkingHours</span><span class="params">()</span></span>: <span class="built_in">Int</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> hourReporter.reportHours()</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">fun</span> <span class="title">calculatePayroll</span><span class="params">()</span></span>: <span class="built_in">Int</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> payCalculator.calculatePay()</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">fun</span> <span class="title">saveEmployee</span><span class="params">()</span></span> &#123;</span><br><span class="line">        employeeSaver.saveEmpployee(<span class="keyword">this</span>)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>It’s easy to understand that <code>HourReporter</code>, <code>PayCalculator</code>, <code>EmployeeSaver</code> classes has higher prority then <code>Employee</code> class and we want to avoid code change on them when we need change Employee class. The UML of structure is like:</p>
<p><img src="https://raw.githubusercontent.com/Yunze-Li/BlogPictures/master/BlogPictures/pictures/employee_uml.jpg?token=AOJCUF3KSFOTDP2ZTUL7N7S65W72I" alt=""></p>
<p>Note that an arrow pointing from class A (<em>Employee</em>) to class B(<em>HourReporter</em>, <em>PayCalculator</em>, <em>EmployeeSaver</em>) means: <strong>the source code of class A mentionas the name of class B, but class B mentions nothing about class A</strong>. In this XML, <code>Employee</code> depends on these three classes, so those three classes is protected from changes in <code>Employee</code>.</p>
<h3 id="Liskov-Substitution-Principle-LSP"><a href="#Liskov-Substitution-Principle-LSP" class="headerlink" title="Liskov Substitution Principle (LSP)"></a>Liskov Substitution Principle (LSP)</h3><blockquote>
<p>Subclass should be substitutable for their base class</p>
</blockquote>
<p>A typical example of this principle is <strong>square/rectangle problem</strong>, let’s briefly recall the problem first by UML:</p>
<p><img src="https://raw.githubusercontent.com/Yunze-Li/BlogPictures/master/BlogPictures/pictures/rectangle_square_uml.jpg?token=AOJCUF276FUZ7ZXLNXHICRS65W73O" alt=""></p>
<p>As common sense, a <code>Square</code> should be treated as a special <code>Rectangle</code> which means all operations or parameters for a rectangle object should also effect on a square object. Let’s see the code block below:</p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">val</span> rectangle = Rectangle()</span><br><span class="line">rectangle.setWidth(<span class="number">2</span>)</span><br><span class="line">rectangle.setHeight(<span class="number">5</span>)</span><br><span class="line">assert(rectangle.getArea() == <span class="number">10</span>)</span><br></pre></td></tr></table></figure>

<p>This should work fine and the assertion should pass as well, but when we do the same thing to a <code>Square</code> like:</p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">val</span> square= Square()</span><br><span class="line">square.setSide(<span class="number">2</span>) <span class="comment">// how can width and height change at same time???</span></span><br><span class="line">square.setSide(<span class="number">5</span>)</span><br><span class="line">assert(rectangle.getArea() == <span class="number">10</span>) <span class="comment">// this will failed and area will be 25</span></span><br></pre></td></tr></table></figure>

<p>The core problem behind this case is : <strong><code>square has a feature which rectangle don&#39;t: need set both width and height always at same time with same value, they can&#39;t be changed separately</code></strong>. It may causing a lot problems becuase of this.</p>
<h3 id="Interface-Segregation-Principle-ISP"><a href="#Interface-Segregation-Principle-ISP" class="headerlink" title="Interface Segregation Principle (ISP)"></a>Interface Segregation Principle (ISP)</h3><blockquote>
<p>No client should be forced to implement methods it doesn’t use</p>
</blockquote>
<p>When we play with abstract interfaces and implementation, a common problem is we find there are extra methods that the implementation not used at all. The easiest way to handle it is just override it and make it empty. But by doing this, there is a risk that it might be touched by other maintainers or even yourself in future since you may not remember. A good fix on this should be separate it into multiple specific interfaces like:</p>
<p><img src="https://raw.githubusercontent.com/Yunze-Li/BlogPictures/master/BlogPictures/pictures/ISP_fix.jpg?token=AOJCUF2KLODQUOIT6PAFFAC65W74Q" alt=""></p>
<p>In my opinion this is a good way to minimum the risk and separate interface for different class if they not use all of them, but also note that <strong>this might causing a lot interfaces to be generated, this is the trade-off</strong>.</p>
<h3 id="Dependency-Inversion-Principle-DIP"><a href="#Dependency-Inversion-Principle-DIP" class="headerlink" title="Dependency Inversion Principle (DIP)"></a>Dependency Inversion Principle (DIP)</h3><blockquote>
<p>High-level module shouldn’t depend on low-level, but both should only depend on abstraction, not on concretions</p>
</blockquote>
<p>This is the most information principle in my opinion and also the hardest one to understand. To understand this, first question is: what is abstraction and why we need it? To answer this, let’s see this example UML:</p>
<img src="https://raw.githubusercontent.com/Yunze-Li/BlogPictures/master/BlogPictures/pictures/DIP_concrete.jpg?token=AOJCUF2ORMBUUTVHECG6SWK65W75S"  />

<p>This is the concrete implementation for an application with a simple service. <code>Service</code> is created by <code>ServiceFactory</code> by calling <code>serviceFactory.createService()</code>. It works fine but it has several problems:</p>
<ol>
<li><code>Application</code> can access <strong>everthing</strong> inside <code>Service</code> and <code>ServiceFactory</code>, it including something they don’t use (violation of ISP);</li>
<li>Both <code>Service</code> and <code>ServiceFactory</code> are dependencies of <code>Application</code>, which means when their code changed, <code>Application</code> will need to re-comple and re-generated everytime (violation of OCP);</li>
<li>If we want to add new type of service in future, both <code>Application</code> and <code>ServiceFactory</code> need change the code and still hard to extends (violation of OCP again).</li>
</ol>
<p>So according to what we learned before, here is a better solution for all three points above:</p>
<p><img src="https://raw.githubusercontent.com/Yunze-Li/BlogPictures/master/BlogPictures/pictures/DIP_abstract_factory.jpg?token=AOJCUF3HOV4GQEWOL4STCLK65W77I" alt=""></p>
<p>As you can see in the solution UML, we make both <code>ServiceFactory</code> and <code>Service</code> as <strong>Interface</strong> and give them implemnentations for each interface. Note that <strong>implementation is hided from <code>Application</code> so it only communicate with interfaces</strong>. Why? Look back into all three problems above and you will find all of them is successfully solved by using <strong><code>Interface</code></strong>!</p>
<p>Now let’s understand the description of this principle with the example: consider <code>Application</code> as low-level module and <code>ServiceFactory</code>, <code>Service</code> as high-level module, <code>Application</code> should not depends on <code>ServiceFactory</code> and <code>Service</code> because of the violation of ISP, OCP and DIP, and they should all depends on the abstraction, which is <strong><code>Interface</code></strong> in this case. And by using interface, the control flow is successfully inverted from <code>Application -&gt; ServiceFactory</code> to <code>ServiceFactoryImpl -&gt; Application</code>, same for Service as well. This is how <strong>Inversion</strong> come from.</p>
</div><div class="article-tags size-small mb-4"><span class="mr-2">#</span><a class="link-muted mr-2" rel="tag" href="/tags/English/">English</a><a class="link-muted mr-2" rel="tag" href="/tags/Clean-Architecture/">Clean Architecture</a></div><!--!--></article></div><div class="card"><div class="card-content"><h3 class="menu-label has-text-centered">Like this article? Support the author with</h3><div class="buttons is-centered"><a class="button is-success donate"><span class="icon is-small"><i class="fab fa-weixin"></i></span><span>Wechat</span><span class="qrcode"><img src="/img/donate.png" alt="Wechat"></span></a></div></div></div><nav class="post-navigation mt-4 level is-mobile"><div class="level-start"><a class="article-nav-prev level level-item link-muted" href="/2020/06/10/AndroidBasic1/"><i class="level-item fas fa-chevron-left"></i><span class="level-item">Android开发笔记（一）- 四大组件</span></a></div><div class="level-end"><a class="article-nav-next level level-item link-muted" href="/2020/04/28/CleanCode/"><span class="level-item">Clean Code Summary</span><i class="level-item fas fa-chevron-right"></i></a></div></nav><!--!--></div><div class="column column-left is-4-tablet is-4-desktop is-4-widescreen  order-1"><div class="card widget"><div class="card-content"><nav class="level"><div class="level-item has-text-centered flex-shrink-1"><div><figure class="image is-128x128 mx-auto mb-2"><img class="avatar is-rounded" src="/img/avatar.jpg" alt="Yunze Li"></figure><p class="title is-size-4 is-block line-height-inherit">Yunze Li</p><p class="is-size-6 is-block">Mobile Developer</p><p class="is-size-6 is-flex justify-content-center"><i class="fas fa-map-marker-alt mr-1"></i><span>Dubai, UAE</span></p></div></div></nav><nav class="level is-mobile"><div class="level-item has-text-centered is-marginless"><div><p class="heading">Posts</p><a href="/archives"><p class="title">11</p></a></div></div><div class="level-item has-text-centered is-marginless"><div><p class="heading">Categories</p><a href="/categories"><p class="title">3</p></a></div></div><div class="level-item has-text-centered is-marginless"><div><p class="heading">Tags</p><a href="/tags"><p class="title">10</p></a></div></div></nav><div class="level"><a class="level-item button is-primary is-rounded" href="https://github.com/Yunze-Li" target="_blank" rel="noopener">Follow</a></div><div class="level is-mobile"><a class="level-item button is-transparent is-marginless" target="_blank" rel="noopener" title="Github" href="https://github.com/Yunze-Li"><i class="fab fa-github"></i></a><a class="level-item button is-transparent is-marginless" target="_blank" rel="noopener" title="LinkedIn" href="https://www.linkedin.com/in/yunze-li-b8a86a112/"><i class="fab fa-linkedin"></i></a><a class="level-item button is-transparent is-marginless" target="_blank" rel="noopener" title="Email" href="mailto:liyunze0611@163.com"><i class="far fa-envelope"></i></a><a class="level-item button is-transparent is-marginless" target="_blank" rel="noopener" title="Weibo" href="https://www.weibo.com/p/1005051622416860"><i class="fab fa-weibo"></i></a></div></div></div><div class="card widget" id="toc"><div class="card-content"><div class="menu"><h3 class="menu-label">Catalogue</h3><ul class="menu-list"><li><a class="is-flex" href="#Part-II-Starting-with-the-Bricks-Programming-Paradigms"><span class="mr-2">1</span><span>Part II Starting with the Bricks: Programming Paradigms</span></a><ul class="menu-list"><li><a class="is-flex" href="#Structured-Programming-direct-transfer-of-control"><span class="mr-2">1.1</span><span>Structured Programming: direct transfer of control</span></a></li><li><a class="is-flex" href="#Object-Oriented-Programming-indirect-transfer-of-control"><span class="mr-2">1.2</span><span>Object-Oriented Programming: indirect transfer of control</span></a></li><li><a class="is-flex" href="#Functional-Programming-variable-assignment"><span class="mr-2">1.3</span><span>Functional Programming: variable assignment</span></a></li></ul></li><li><a class="is-flex" href="#Part-III-Design-Principles"><span class="mr-2">2</span><span>Part III Design Principles</span></a><ul class="menu-list"><li><a class="is-flex" href="#Single-Responsibility-Principle-SRP"><span class="mr-2">2.1</span><span>Single Responsibility Principle (SRP)</span></a></li><li><a class="is-flex" href="#Open-Closed-Principle-OCP"><span class="mr-2">2.2</span><span>Open-Closed Principle (OCP)</span></a></li><li><a class="is-flex" href="#Liskov-Substitution-Principle-LSP"><span class="mr-2">2.3</span><span>Liskov Substitution Principle (LSP)</span></a></li><li><a class="is-flex" href="#Interface-Segregation-Principle-ISP"><span class="mr-2">2.4</span><span>Interface Segregation Principle (ISP)</span></a></li><li><a class="is-flex" href="#Dependency-Inversion-Principle-DIP"><span class="mr-2">2.5</span><span>Dependency Inversion Principle (DIP)</span></a></li></ul></li></ul></div></div></div><div class="card widget"><div class="card-content"><div class="menu"><h3 class="menu-label">Categories</h3><ul class="menu-list"><li><a class="level is-mobile is-marginless" href="/categories/%E6%8A%80%E6%9C%AF%E5%8D%9A%E5%AE%A2/"><span class="level-start"><span class="level-item">技术博客</span></span><span class="level-end"><span class="level-item tag">11</span></span></a><ul class="mr-0"><li><a class="level is-mobile is-marginless" href="/categories/%E6%8A%80%E6%9C%AF%E5%8D%9A%E5%AE%A2/Android/"><span class="level-start"><span class="level-item">Android</span></span><span class="level-end"><span class="level-item tag">7</span></span></a></li><li><a class="level is-mobile is-marginless" href="/categories/%E6%8A%80%E6%9C%AF%E5%8D%9A%E5%AE%A2/Reading/"><span class="level-start"><span class="level-item">Reading</span></span><span class="level-end"><span class="level-item tag">4</span></span></a></li></ul></li></ul></div></div></div><div class="card widget"><div class="card-content"><h3 class="menu-label">Recent</h3><article class="media"><a class="media-left" href="/2020/10/24/AndroidBasic5/"><p class="image is-64x64"><img class="thumbnail" src="/thumbnails/AndroidBasic.jpg" alt="Android开发笔记之基础篇（五）- 易混淆概念"></p></a><div class="media-content size-small"><p><time dateTime="2020-10-23T20:00:00.000Z">2020-10-24</time></p><p class="title is-6"><a class="link-muted" href="/2020/10/24/AndroidBasic5/">Android开发笔记之基础篇（五）- 易混淆概念</a></p><p class="is-uppercase"><a class="link-muted" href="/categories/%E6%8A%80%E6%9C%AF%E5%8D%9A%E5%AE%A2/">技术博客</a> / <a class="link-muted" href="/categories/%E6%8A%80%E6%9C%AF%E5%8D%9A%E5%AE%A2/Android/">Android</a></p></div></article><article class="media"><a class="media-left" href="/2020/08/06/RxJava/"><p class="image is-64x64"><img class="thumbnail" src="/thumbnails/RxJava.png" alt="RxJava基础概念梳理"></p></a><div class="media-content size-small"><p><time dateTime="2020-08-05T20:00:00.000Z">2020-08-06</time></p><p class="title is-6"><a class="link-muted" href="/2020/08/06/RxJava/">RxJava基础概念梳理</a></p><p class="is-uppercase"><a class="link-muted" href="/categories/%E6%8A%80%E6%9C%AF%E5%8D%9A%E5%AE%A2/">技术博客</a> / <a class="link-muted" href="/categories/%E6%8A%80%E6%9C%AF%E5%8D%9A%E5%AE%A2/Android/">Android</a></p></div></article><article class="media"><a class="media-left" href="/2020/07/09/ClearArchitecture3/"><p class="image is-64x64"><img class="thumbnail" src="/thumbnails/CleanArchitecture.jpg" alt="ClearArchitecture - Architecture"></p></a><div class="media-content size-small"><p><time dateTime="2020-07-08T20:00:00.000Z">2020-07-09</time></p><p class="title is-6"><a class="link-muted" href="/2020/07/09/ClearArchitecture3/">ClearArchitecture - Architecture</a></p><p class="is-uppercase"><a class="link-muted" href="/categories/%E6%8A%80%E6%9C%AF%E5%8D%9A%E5%AE%A2/">技术博客</a> / <a class="link-muted" href="/categories/%E6%8A%80%E6%9C%AF%E5%8D%9A%E5%AE%A2/Reading/">Reading</a></p></div></article><article class="media"><a class="media-left" href="/2020/07/06/ClearArchitecture2/"><p class="image is-64x64"><img class="thumbnail" src="/thumbnails/CleanArchitecture.jpg" alt="clearArchitecture - Desgin Principles &amp; Component Principles"></p></a><div class="media-content size-small"><p><time dateTime="2020-07-05T20:00:00.000Z">2020-07-06</time></p><p class="title is-6"><a class="link-muted" href="/2020/07/06/ClearArchitecture2/">clearArchitecture - Desgin Principles &amp; Component Principles</a></p><p class="is-uppercase"><a class="link-muted" href="/categories/%E6%8A%80%E6%9C%AF%E5%8D%9A%E5%AE%A2/">技术博客</a> / <a class="link-muted" href="/categories/%E6%8A%80%E6%9C%AF%E5%8D%9A%E5%AE%A2/Reading/">Reading</a></p></div></article><article class="media"><a class="media-left" href="/2020/07/02/AndroidBasic4/"><p class="image is-64x64"><img class="thumbnail" src="/thumbnails/AndroidBasic.jpg" alt="Android开发笔记（四）- Layout布局"></p></a><div class="media-content size-small"><p><time dateTime="2020-07-01T20:00:00.000Z">2020-07-02</time></p><p class="title is-6"><a class="link-muted" href="/2020/07/02/AndroidBasic4/">Android开发笔记（四）- Layout布局</a></p><p class="is-uppercase"><a class="link-muted" href="/categories/%E6%8A%80%E6%9C%AF%E5%8D%9A%E5%AE%A2/">技术博客</a> / <a class="link-muted" href="/categories/%E6%8A%80%E6%9C%AF%E5%8D%9A%E5%AE%A2/Android/">Android</a></p></div></article></div></div><div class="card widget"><div class="card-content"><div class="menu"><h3 class="menu-label">Archives</h3><ul class="menu-list"><li><a class="level is-mobile is-marginless" href="/archives/2020/10/"><span class="level-start"><span class="level-item">October 2020</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile is-marginless" href="/archives/2020/08/"><span class="level-start"><span class="level-item">August 2020</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile is-marginless" href="/archives/2020/07/"><span class="level-start"><span class="level-item">July 2020</span></span><span class="level-end"><span class="level-item tag">3</span></span></a></li><li><a class="level is-mobile is-marginless" href="/archives/2020/06/"><span class="level-start"><span class="level-item">June 2020</span></span><span class="level-end"><span class="level-item tag">3</span></span></a></li><li><a class="level is-mobile is-marginless" href="/archives/2020/05/"><span class="level-start"><span class="level-item">May 2020</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile is-marginless" href="/archives/2020/04/"><span class="level-start"><span class="level-item">April 2020</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile is-marginless" href="/archives/2020/02/"><span class="level-start"><span class="level-item">February 2020</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li></ul></div></div></div><div class="card widget"><div class="card-content"><div class="menu"><h3 class="menu-label">Tags</h3><div class="field is-grouped is-grouped-multiline"><div class="control"><a class="tags has-addons" href="/tags/Android-UI/"><span class="tag">Android UI</span><span class="tag is-grey-lightest">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Chinese/"><span class="tag">Chinese</span><span class="tag is-grey-lightest">6</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Clean-Architecture/"><span class="tag">Clean Architecture</span><span class="tag is-grey-lightest">3</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Clean-Code/"><span class="tag">Clean Code</span><span class="tag is-grey-lightest">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Dagger/"><span class="tag">Dagger</span><span class="tag is-grey-lightest">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/English/"><span class="tag">English</span><span class="tag is-grey-lightest">5</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Java/"><span class="tag">Java</span><span class="tag is-grey-lightest">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Kotlin/"><span class="tag">Kotlin</span><span class="tag is-grey-lightest">2</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Multi-thread/"><span class="tag">Multi-thread</span><span class="tag is-grey-lightest">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/RxJava/"><span class="tag">RxJava</span><span class="tag is-grey-lightest">1</span></a></div></div></div></div></div></div><!--!--></div></div></section><footer class="footer"><div class="container"><div class="level"><div class="level-start"><a class="footer-logo is-block mb-2" href="/"><img src="/img/logo.png" alt="" height="28"></a><p class="size-small"><span>&copy; 2020 </span>  Powered by <a href="https://hexo.io/" target="_blank" rel="noopener">Hexo</a> &amp; <a href="https://github.com/ppoffice/hexo-theme-icarus" target="_blank" rel="noopener">Icarus</a></p></div><div class="level-end"><div class="field has-addons"><p class="control"><a class="button is-transparent is-large" target="_blank" rel="noopener" title="Creative Commons" href="https://creativecommons.org/"><i class="fab fa-creative-commons"></i></a></p><p class="control"><a class="button is-transparent is-large" target="_blank" rel="noopener" title="Attribution 4.0 International" href="https://creativecommons.org/licenses/by/4.0/"><i class="fab fa-creative-commons-by"></i></a></p><p class="control"><a class="button is-transparent is-large" target="_blank" rel="noopener" title="Download on GitHub" href="https://github.com/ppoffice/hexo-theme-icarus"><i class="fab fa-github"></i></a></p></div></div></div></div></footer><script src="https://cdn.jsdelivr.net/npm/jquery@3.3.1/dist/jquery.min.js"></script><script src="https://cdn.jsdelivr.net/npm/moment@2.22.2/min/moment-with-locales.min.js"></script><script>moment.locale("en");</script><script>var IcarusThemeSettings = {
            site: {
                url: 'http://yoursite.com',
                external_link: {"enable":true,"exclude":[]}
            },
            article: {
                highlight: {
                    clipboard: true,
                    fold: 'unfolded'
                }
            }
        };</script><script src="https://cdn.jsdelivr.net/npm/clipboard@2.0.4/dist/clipboard.min.js" defer></script><script src="/js/animation.js"></script><a id="back-to-top" title="Back to Top" href="javascript:;"><i class="fas fa-chevron-up"></i></a><script src="/js/back_to_top.js" defer></script><script src="https://cdn.jsdelivr.net/npm/lightgallery@1.6.8/dist/js/lightgallery.min.js" defer></script><script src="https://cdn.jsdelivr.net/npm/justifiedGallery@3.7.0/dist/js/jquery.justifiedGallery.min.js" defer></script><script>window.addEventListener("load", () => {
            if (typeof $.fn.lightGallery === 'function') {
                $('.article').lightGallery({ selector: '.gallery-item' });
            }
            if (typeof $.fn.justifiedGallery === 'function') {
                if ($('.justified-gallery > p > .gallery-item').length) {
                    $('.justified-gallery > p > .gallery-item').unwrap();
                }
                $('.justified-gallery').justifiedGallery();
            }
        });</script><!--!--><!--!--><!--!--><script src="/js/main.js" defer></script><div class="searchbox"><div class="searchbox-container"><div class="searchbox-header"><div class="searchbox-input-container"><input class="searchbox-input" type="text" placeholder="Type something..."></div><a class="searchbox-close" href="javascript:;">×</a></div><div class="searchbox-body"></div></div></div><script src="/js/insight.js" defer></script><script>document.addEventListener('DOMContentLoaded', function () {
            loadInsight({"contentUrl":"/content.json"}, {"hint":"Type something...","untitled":"(Untitled)","posts":"Posts","pages":"Pages","categories":"Categories","tags":"Tags"});
        });</script></body></html>